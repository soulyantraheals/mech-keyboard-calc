<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydra Mech-Calc Pro</title>
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --main-bg: #050505; --key-bg: #1a1a2e; --accent: #00ffff; }
        body { background-color: #000; font-family: 'Rajdhani', sans-serif; color: white; overflow: hidden; display: flex; align-items: center; justify-content: center; min-height: screen; }
        
        /* RGB Outer Glow - Controlled by Toggle */
        .rgb-frame {
            padding: 4px; border-radius: 2.6rem; transition: all 0.5s;
            background: #111; /* Default off */
        }
        .rgb-active {
            background: linear-gradient(var(--angle), #ff0000, #00ff00, #0000ff, #ff00ff, #ff0000);
            animation: rotate 4s linear infinite;
        }
        @property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }
        @keyframes rotate { to { --angle: 360deg; } }

        .calculator-body { 
            width: 350px; height: 620px; background: #0a0a0f; border-radius: 2.5rem; 
            padding: 1.5rem; display: flex; flex-direction: column; 
        }

        /* RGB Keys */
        .key-rgb { border: 1px solid rgba(0, 255, 255, 0.3); box-shadow: 0 0 5px rgba(0, 255, 255, 0.1); }
        .rgb-active .key-rgb { animation: keyPulse 2s infinite alternate; }
        @keyframes keyPulse { from { border-color: #00ffff; } to { border-color: #ff00ff; } }

        .display { 
            background: #000; height: 110px; border-radius: 1.5rem; margin-bottom: 2rem;
            display: flex; flex-direction: column; justify-content: center;
            padding: 1.5rem; text-align: right; border: 1px solid #222; overflow: hidden;
        }

        .key { 
            background: var(--key-bg); border-bottom: 4px solid #000; color: var(--accent); 
            font-weight: bold; border-radius: 0.8rem; height: 60px; transition: transform 0.05s;
        }
        .key:active { transform: translateY(3px); border-bottom-width: 1px; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
    </style>
</head>
<body>

    <div id="mainFrame" class="rgb-frame rgb-active">
        <div class="calculator-body">
            <div class="flex justify-between items-center mb-6">
                <span class="text-[10px] font-bold text-cyan-500 tracking-[0.4em]">HYDRA 10</span>
                <button onclick="toggleModal()" class="bg-gray-800 text-[10px] px-4 py-1 rounded-full border border-gray-600 hover:bg-gray-700">ðŸŽ¨ CUSTOMIZE</button>
            </div>

            <div class="display">
                <div id="res" class="text-cyan-400 text-3xl font-bold font-['Orbitron']">0</div>
            </div>

            <div class="grid grid-cols-4 gap-3 mb-4" id="key-grid"></div>
        </div>
    </div>

    <div id="themeModal" class="modal">
        <div class="bg-[#0f0f1a] border-2 border-cyan-900 rounded-[2rem] p-8 w-80 text-center">
            <h2 class="text-xl font-bold text-cyan-400 mb-6 font-['Orbitron']">SETTINGS</h2>
            
            <div class="mb-6 flex flex-col items-center">
                <p class="text-[10px] text-gray-500 mb-2 uppercase">Sync Settings</p>
                <div id="g_id_onload" data-client_id="YOUR_ID.apps.googleusercontent.com" data-callback="handleLogin"></div>
                <div class="g_id_signin" data-type="standard"></div>
            </div>

            <div class="space-y-4 mb-6">
                <div>
                    <label class="text-[10px] text-gray-400 block mb-1">RGB LIGHTING</label>
                    <button id="rgbToggle" onclick="toggleRGB()" class="w-full bg-green-900/30 text-green-400 p-2 rounded border border-green-700 text-xs">EFFECT: ON</button>
                </div>
                <div>
                    <label class="text-[10px] text-gray-400 block mb-1">KEYBOARD THEME</label>
                    <select id="themeSelect" class="w-full bg-black border border-gray-700 p-2 rounded text-xs">
                        <option value="black">Mechanical Black (Free)</option>
                        <option value="indigo">Indigo Blue (Free)</option>
                        <option value="white">White Hybrid (Premium)</option>
                        <option value="pink">Pink Gradient (Premium)</option>
                    </select>
                </div>
                <div>
                    <label class="text-[10px] text-gray-400 block mb-1">SOUND PROFILE</label>
                    <select id="soundSelect" class="w-full bg-black border border-gray-700 p-2 rounded text-xs">
                        <option value="blue">Blue Switch (Clicky)</option>
                        <option value="brown">Brown Switch (Tactile)</option>
                        <option value="creamy">Creamy Linear (Premium)</option>
                        <option value="type">Typewriter (Premium)</option>
                    </select>
                </div>
            </div>

            <button onclick="applyChanges()" class="w-full bg-cyan-600 text-white font-bold py-3 rounded-xl">APPLY & SAVE</button>
            <button onclick="toggleModal()" class="mt-4 text-gray-500 text-xs">Close</button>
        </div>
    </div>

    <script>
        let expr = "";
        let audioCtx = null;
        let rgbOn = true;
        const keys = ['C', 'Ã·', 'Ã—', 'âŒ«', '7', '8', '9', '-', '4', '5', '6', '+', '1', '2', '3', '=', '0', '.'];

        window.onload = () => {
            renderKeys();
            loadSettings();
        };

        function renderKeys() {
            const grid = document.getElementById('key-grid');
            grid.innerHTML = "";
            keys.forEach(k => {
                const btn = document.createElement('button');
                btn.className = `key key-rgb ${k === '0' ? 'col-span-2' : ''} ${['+','-','Ã—','Ã·','='].includes(k) ? 'bg-cyan-900/50' : ''}`;
                btn.innerText = k;
                btn.onclick = () => triggerAction(k);
                grid.appendChild(btn);
            });
        }

        function playSound() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const type = document.getElementById('soundSelect').value;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            
            if(type === 'blue') osc.type = 'square';
            else if(type === 'brown') osc.type = 'sine';
            else if(type === 'creamy') osc.type = 'triangle';
            else osc.type = 'sawtooth';

            osc.frequency.setValueAtTime(type === 'brown' ? 200 : 400, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
            osc.start(); osc.stop(audioCtx.currentTime + 0.1);
        }

        function toggleRGB() {
            rgbOn = !rgbOn;
            const frame = document.getElementById('mainFrame');
            const btn = document.getElementById('rgbToggle');
            if(rgbOn) {
                frame.classList.add('rgb-active');
                btn.innerText = "EFFECT: ON";
                btn.className = "w-full bg-green-900/30 text-green-400 p-2 rounded border border-green-700 text-xs";
            } else {
                frame.classList.remove('rgb-active');
                btn.innerText = "EFFECT: OFF";
                btn.className = "w-full bg-red-900/30 text-red-400 p-2 rounded border border-red-700 text-xs";
            }
        }

        function applyChanges() {
            const theme = document.getElementById('themeSelect').value;
            const isPremium = localStorage.getItem('isPremiumUser') === 'true';

            if ((theme === 'white' || theme === 'pink') && !isPremium) {
                alert("Premium theme! Redirecting...");
                window.open("https://rzp.io/rzp/UJNDMxC", "_blank");
                return;
            }

            if (theme === 'black') { document.documentElement.style.setProperty('--main-bg', '#050505'); document.documentElement.style.setProperty('--key-bg', '#1a1a2e'); document.documentElement.style.setProperty('--accent', '#00ffff'); }
            if (theme === 'indigo') { document.documentElement.style.setProperty('--main-bg', '#0a0a20'); document.documentElement.style.setProperty('--key-bg', '#312e81'); document.documentElement.style.setProperty('--accent', '#818cf8'); }
            if (theme === 'white') { document.documentElement.style.setProperty('--main-bg', '#f3f4f6'); document.documentElement.style.setProperty('--key-bg', '#ffffff'); document.documentElement.style.setProperty('--accent', '#111827'); }
            
            localStorage.setItem('savedTheme', theme);
            localStorage.setItem('savedSound', document.getElementById('soundSelect').value);
            toggleModal();
        }

        function triggerAction(k) {
            playSound();
            const res = document.getElementById('res');
            if (k === 'C') expr = ""; 
            else if (k === 'âŒ«') expr = expr.slice(0, -1);
            else if (k === '=') {
                if(expr === "12345") { localStorage.setItem('isPremiumUser', 'true'); alert("PREMIUM UNLOCKED!"); location.reload(); return; }
                try { expr = eval(expr.replace('Ã—', '*').replace('Ã·', '/')).toString(); } catch { expr = "Error"; }
            } else expr += k;
            res.innerText = expr || "0";
            res.style.fontSize = res.innerText.length > 8 ? "1.5rem" : "1.875rem";
        }

        function toggleModal() { document.getElementById('themeModal').classList.toggle('active'); }
        function handleLogin(res) { console.log("User Logged In"); alert("Account Linked!"); }
        function loadSettings() {
            const t = localStorage.getItem('savedTheme') || 'black';
            document.getElementById('themeSelect').value = t;
            applyChanges();
        }
    </script>
</body>
</html>

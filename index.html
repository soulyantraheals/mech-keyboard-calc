<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydra 10 Mech-Calc Pro</title>
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-primary: #0f0f1a; --key-text: #00ffff; --rgb-speed: 3s; }
        body { background-color: #050505; font-family: 'Rajdhani', sans-serif; color: white; overflow: hidden; }
        
        /* Moving RGB Border Animation */
        .rgb-border {
            position: relative; border-radius: 2.5rem; padding: 3px;
            background: linear-gradient(var(--rgb-angle), #ff0000, #00ff00, #0000ff, #ff00ff, #ff0000);
            animation: rotateRGB var(--rgb-speed) linear infinite;
        }
        @property --rgb-angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }
        @keyframes rotateRGB { to { --rgb-angle: 360deg; } }

        .calculator-body { background: #0a0a0f; border-radius: 2.4rem; padding: 1.5rem; width: 100%; max-width: 360px; }
        
        .display { 
            background: #000; border: 1px solid #1a1a2e; word-break: break-all; 
            min-height: 100px; display: flex; flex-direction: column; justify-content: flex-end;
            box-shadow: inset 0 0 15px rgba(0, 255, 255, 0.1);
        }

        .key { 
            background: #1a1a2e; border-bottom: 4px solid #000; color: var(--key-text); 
            transition: all 0.05s; text-shadow: 0 0 5px var(--key-text);
        }
        .key:active { transform: translateY(3px); border-bottom-width: 1px; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; align-items: center; justify-content: center; }
        .modal.active { display: flex; }

        /* RGB Light Glow for Free Tier */
        .free-rgb { box-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <div class="rgb-border">
        <div class="calculator-body">
            <div class="flex justify-between items-center mb-4">
                <span class="text-[9px] text-cyan-400 font-bold tracking-[0.3em]">HYDRA-10 MECH</span>
                <div class="flex gap-1">
                    <button id="loginBtn" onclick="handleLogin()" class="bg-white text-black text-[8px] px-2 py-1 rounded-full font-bold">LOGIN</button>
                    <button id="muteBtn" onclick="toggleMute()" class="bg-gray-800 text-[8px] px-2 py-1 rounded-full">ðŸ”Š ON</button>
                    <button onclick="toggleModal()" class="bg-cyan-950 text-cyan-400 text-[8px] px-2 py-1 rounded-full border border-cyan-700">ðŸŽ¨ THEMES</button>
                </div>
            </div>

            <div class="display rounded-2xl p-4 text-right mb-6">
                <div id="res" class="text-cyan-400 text-3xl font-bold font-['Orbitron']">0</div>
            </div>

            <div class="grid grid-cols-4 gap-3" id="key-grid"></div>
        </div>
    </div>

    <div id="themeModal" class="modal">
        <div class="bg-[#0a0a14] border border-cyan-500 rounded-3xl p-6 w-80 text-center">
            <h2 class="text-xl font-bold text-cyan-400 mb-4 font-['Orbitron']">PORTABLES & SOUNDS</h2>
            <div class="grid grid-cols-2 gap-2 mb-4">
                <button onclick="setTheme('black')" class="bg-gray-800 p-2 rounded text-xs">Black (Free)</button>
                <button onclick="setTheme('indigo')" class="bg-indigo-900 p-2 rounded text-xs">Indigo (Free)</button>
                <button onclick="checkPremium('white')" class="bg-white text-black p-2 rounded text-xs font-bold">White (Prem)</button>
                <button onclick="checkPremium('pink')" class="bg-pink-500 p-2 rounded text-xs font-bold">Pink (Prem)</button>
            </div>
            <p class="text-[10px] text-gray-400 mb-2">SOUND PROFILE:</p>
            <select id="soundSelect" class="bg-black text-cyan-400 text-xs p-2 rounded w-full border border-cyan-900">
                <option value="click">Blue Switch (Free)</option>
                <option value="thump">Brown Switch (Free)</option>
                <option value="typewriter">Typewriter (Premium)</option>
                <option value="creamy">Creamy Linear (Premium)</option>
                <option value="heavy">Heavy Tactile (Premium)</option>
                <option value="silent">Silent Red (Premium)</option>
            </select>
            <a href="https://rzp.io/rzp/UJNDMxC" target="_blank" class="block mt-4 text-[10px] text-yellow-500 underline">Get Premium Unlocks ($1.00)</a>
            <button onclick="toggleModal()" class="mt-4 text-gray-500 text-xs">Close</button>
        </div>
    </div>

    <script>
        let isMuted = false;
        let isLoggedIn = false;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // --- ðŸŽ§ 6-TYPE SOUND ENGINE ---
        function playMechSound() {
            if (isMuted) return;
            if (audioCtx.state === 'suspended') audioCtx.resume();
            
            const type = document.getElementById('soundSelect').value;
            const isPremiumSound = ['typewriter', 'creamy', 'heavy', 'silent'].includes(type);
            
            if (isPremiumSound && localStorage.getItem('isPremiumUser') !== 'true') {
                // Fallback to free sound if trying to use premium without paying
                playTone(150, 0.1, 'square');
                return;
            }

            switch(type) {
                case 'click': playTone(400, 0.05, 'square'); break;
                case 'thump': playTone(100, 0.15, 'sine'); break;
                case 'typewriter': playTone(600, 0.03, 'sawtooth'); break;
                case 'creamy': playTone(200, 0.2, 'triangle'); break;
                case 'heavy': playTone(80, 0.25, 'square'); break;
                case 'silent': playTone(120, 0.02, 'sine'); break;
            }
        }

        function playTone(freq, dur, wave) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = wave;
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + dur);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + dur);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + dur);
        }

        // --- ðŸ” LOGIN & GOOGLE IDENTITY ---
        function handleLogin() {
            google.accounts.id.initialize({
                client_id: "PASTE_YOUR_GOOGLE_CLIENT_ID_HERE", // Get from Google Cloud Console
                callback: (res) => {
                    const user = JSON.parse(atob(res.credential.split('.')[1]));
                    isLoggedIn = true;
                    document.getElementById('loginBtn').innerText = "ðŸ‘¤ " + user.given_name;
                    localStorage.setItem('userEmail', user.email);
                }
            });
            google.accounts.id.prompt();
        }

        // --- ðŸŽ¨ THEME & RGB ENGINE ---
        function setTheme(t) {
            if (t === 'black') { document.documentElement.style.setProperty('--bg-primary', '#0f0f1a'); document.documentElement.style.setProperty('--key-text', '#00ffff'); }
            if (t === 'indigo') { document.documentElement.style.setProperty('--bg-primary', '#1e1b4b'); document.documentElement.style.setProperty('--key-text', '#818cf8'); }
            if (t === 'white') { document.documentElement.style.setProperty('--bg-primary', '#ffffff'); document.documentElement.style.setProperty('--key-text', '#1a1a1a'); }
            if (t === 'pink') { document.documentElement.style.setProperty('--bg-primary', '#fbcfe8'); document.documentElement.style.setProperty('--key-text', '#db2777'); }
        }

        function checkPremium(t) {
            if (localStorage.getItem('isPremiumUser') === 'true') { setTheme(t); } 
            else { window.open("https://rzp.io/rzp/UJNDMxC", "_blank"); }
        }

        // --- ðŸ”¢ CALC LOGIC + SECRET CODE ---
        let expr = "";
        const keys = ['C', 'Ã·', 'Ã—', 'âŒ«', '7', '8', '9', '-', '4', '5', '6', '+', '1', '2', '3', '=', '0', '.'];
        keys.forEach(k => {
            const btn = document.createElement('button');
            btn.className = `key rounded-xl h-14 font-bold ${k === '0' ? 'col-span-2' : ''} ${k === '=' ? 'bg-cyan-500 text-black' : ''}`;
            btn.innerText = k;
            btn.onclick = () => { playMechSound(); handleInput(k); };
            document.getElementById('key-grid').appendChild(btn);
        });

        function handleInput(k) {
            const res = document.getElementById('res');
            if (k === 'C') expr = ""; 
            else if (k === 'âŒ«') expr = expr.slice(0, -1);
            else if (k === '=') {
                if (expr === "12345") { // SECRET CODE TO UNLOCK
                    localStorage.setItem('isPremiumUser', 'true');
                    alert("PREMIUM ACTIVATED!"); location.reload(); return;
                }
                try { expr = eval(expr.replace('Ã—', '*').replace('Ã·', '/')).toString(); }
                catch { expr = "Error"; }
            } else expr += k;
            res.innerText = expr || "0";
            res.style.fontSize = res.innerText.length > 9 ? "1.2rem" : "1.875rem";
        }

        function toggleMute() { isMuted = !isMuted; document.getElementById('muteBtn').innerText = isMuted ? "ðŸ”‡ OFF" : "ðŸ”Š ON"; }
        function toggleModal() { document.getElementById('themeModal').classList.toggle('active'); }

        if (window.location.search.includes('status=success')) {
            localStorage.setItem('isPremiumUser', 'true');
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    </script>
</body>
</html>
